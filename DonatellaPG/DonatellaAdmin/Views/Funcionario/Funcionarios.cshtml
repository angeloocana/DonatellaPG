@model IEnumerable<DonatellaDomain.Entities.Funcionario>

@{
    ViewBag.Title = "Funcionários";
}

<script type="text/javascript">
    var a;
    function excluirFuncionario(id, link) {
        if(confirm('Deseja realmente excluir o registro?'))
            $.ajax({
                type: "POST",
                url: '@Url.Action("Excluir")',
                data: {
                    id: id , 
                    __RequestVerificationToken : $('input[name="__RequestVerificationToken"]').val()
                },
                success: function (retorno) {
                    if (retorno == "OK") retorno = "Registro exluido com sucesso!";
                    alert(retorno);
                    link.parentNode.parentNode.parentNode.removeChild(link.parentNode.parentNode);
                }
            });
    }
</script>

<div class="bs-docs-section">
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="col-lg-12">
            <div class="page-header">
                <h1 id="tables">Funcionários</h1>
            </div>

            <div class="bs-component">
                <button type="button" onclick="window.location = '@Url.Action("Editar")'" class="btn btn-success">Criar novo</button>
                <table class="table table-striped table-hover ">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Telefone</th>
                            <th>Ativo</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(x => item.NomeFuncionario)
                                </td>
                                <td>
                                    @Html.DisplayFor(x => item.Email)
                                </td>
                                <td>
                                    @item.TelefoneDDD
                                    @item.Telefone
                                    @item.CelularDDD
                                    @item.Celular
                                </td>
                                <td>@Html.DisplayFor(x => item.Ativo)</td>
                                <td>
                                    @Html.ActionLink("Editar", "Editar", new { id = item.FuncionarioId }) |
                                    <a href="javaScript:void(0);" onclick="excluirFuncionario(@item.FuncionarioId, this);">Excluir</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div><!-- /example -->
        </div>
    </div>
</div>


